<nav class="p-4 mb-4 w-full border-b flex justify-between items-center shadow-xl">
  <!-- Logo -->
  <div class="flex py-2">
    <%= render "devise/shared/logo_black" %>
  </div>
  <% if user_signed_in? %>
    <% unless @bussines.nil? %>
      <div>
        <%= link_to  "Ingresos", business_earnings_path(@bussines) %>
        <%= link_to  "Egresos", business_egresses_path(@bussines) %>
        <%= link_to  "Movimientos", business_movements_path(@bussines) %>
      </div>
    <% end %>
    <div class="flex justify-center">
      <div class="relative inline-block group">
        <!-- Dropdown toggle button -->
        <button id="dropdown-toggle" class="group relative z-10 flex items-center p-2 text-sm text-gray-600 bg-white border rounded border-transparent focus:border-blue-500 focus:ring-opacity-40 dark:focus:ring-opacity-40 focus:ring-blue-300 dark:focus:ring-blue-400 focus:ring dark:text-white dark:bg-gray-800 focus:outline-none">
          <a href="#" class="flex items-center text-sm text-gray-600 transition-colors duration-200 transform dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white">
            <img class="flex-shrink-0 object-cover mx-1 rounded-full w-9 h-9" src="https://images.unsplash.com/photo-1523779917675-b6ed3a42a561?ixid=MnwxMjA3fDB8MHxzZWFyY2h8N3x8d29tYW4lMjBibHVlfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=face&w=500&q=200" alt="user_avatar">
            <div class="mx-1">
              <h1 class="text-sm font-semibold text-gray-700 dark:text-gray-200"><%= current_user&.first_name %> <%= current_user&.last_name %></h1>
              <p class="text-sm text-gray-500 dark:text-gray-400">Negocio, si existe</p>
            </div>
          </a>
          <svg class="w-5 h-5 mx-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15.713L18.01 9.70299L16.597 8.28799L12 12.888L7.40399 8.28799L5.98999 9.70199L12 15.713Z" fill="currentColor"></path>
          </svg>
        </button>
        <!-- Dropdown menu -->
        <div id="dropdown-menu" class="absolute right-0 z-20 w-56 py-2 mt-2 overflow-hidden bg-white rounded-md shadow-xl dark:bg-gray-800 hidden">
          <% if user_signed_in? %>
            <%= link_to "Ver mi perfil", edit_user_registration_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white md:block" %>
            <hr class="border-gray-200 dark:border-gray-700">
            <%= button_to "Cerrar Sesi贸n", destroy_user_session_path, method: :delete, form: {  data: { turbo: :false } }, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white md:block" %>
          <% else %>
            <%= link_to "Iniciar Sesi贸n", new_user_session_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
            <hr class="border-gray-200 dark:border-gray-700">
            <%= link_to "Registrarse", new_user_registration_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="flex justify-center">
      <div class="relative inline-block group">
        <button id="dropdown-toggle" class="group relative z-10 flex items-center p-2 text-sm text-gray-600 bg-white border rounded border-transparent focus:border-blue-500 focus:ring-opacity-40 dark:focus:ring-opacity-40 focus:ring-blue-300 dark:focus:ring-blue-400 focus:ring dark:text-white dark:bg-gray-800 focus:outline-none md:hidden">
          <a href="#" class="flex items-center p-3 -mt-2 text-sm text-gray-600 transition-colors duration-200 transform dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white">
          </a>
          <svg class="w-5 h-5 mx-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 15.713L18.01 9.70299L16.597 8.28799L12 12.888L7.40399 8.28799L5.98999 9.70199L12 15.713Z" fill="currentColor"></path>
          </svg>
        </button>
        <div class="hidden md:flex py-2 ">
          <%= link_to "Iniciar Sesi贸n", new_user_session_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
          <hr class="border-gray-200 dark:border-gray-700">
          <%= link_to "Registrarse", new_user_registration_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform md:text-white md:bg-purple-600 rounded dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
        </div>
        <!-- Dropdown menu -->
        <div id="dropdown-menu" class="absolute right-0 z-20 w-56 py-2 mt-2 overflow-hidden bg-white rounded-md shadow-xl dark:bg-gray-800 hidden">
          <%= link_to "Iniciar Sesi贸n", new_user_session_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
          <hr class="border-gray-200 dark:border-gray-700">
          <%= link_to "Registrarse", new_user_registration_path, class:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-200 transform dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"%>
        </div>
      </div>
    </div>
  <% end %>
</nav>
<script>
  const dropdownToggle = document.getElementById('dropdown-toggle');
  const dropdownMenu = document.getElementById('dropdown-menu');

  dropdownToggle.addEventListener('click', () => {
      dropdownMenu.classList.toggle('hidden');
  });
</script>
